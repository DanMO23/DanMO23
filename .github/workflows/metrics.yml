name: Metrics
on:
  # Roda todos os dias à meia-noite
  schedule: [{cron: "0 0 * * *"}]
  # Permite rodar manualmente
  workflow_dispatch:
  push: {branches: ["master", "main"]}
jobs:
  github-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}

          # --- CONFIGURAÇÃO VISUAL ---
          user: DanMO23
          template: classic
          config_timezone: America/Sao_Paulo
          theme: dracula
          
          # --- O QUE MOSTRAR ---
          # "header": Mostra teu Avatar + Total de Commits + PRs
          # "repositories": Mostra estrelas e licenças
          base: header, repositories
          
          # --- PLUGIN: LINHAS DE CÓDIGO ---
          plugin_lines: yes
          
          # --- PLUGIN: LINGUAGENS (O GRÁFICO BONITO) ---
          plugin_languages: yes
          # Mostra até 8 linguagens
          plugin_languages_limit: 8
          # Detalhes: mostra bytes e porcentagem
          plugin_languages_details: bytes-size, percentage
          # Indepth: Melhora a precisão dos dados
          plugin_languages_indepth: yes
          # Cores oficiais do GitHub
          plugin_languages_colors: "github"
          
          # AQUI ESTÁ A MUDANÇA:
          # Removi HTML, Blade e Jupyter da lista de ignorados.
          # Agora eles vão aparecer no gráfico!
          plugin_languages_ignored: >-
            css, scss, assembly
            
          # Nome do arquivo final
          filename: github-metrics.svg
